<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>Photo Booth - Kitsch Frame</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      /* ğŸ”§ ë°°ê²½ ì´ë¯¸ì§€ (ì›í•˜ëŠ” ì‚¬ì§„ URLë¡œ êµì²´) */
      --bg-image: url("https://images.pexels.com/photos/531880/pexels-photo-531880.jpeg?auto=compress&cs=tinysrgb&w=1200");
      --window-bg: rgba(255, 255, 255, 0.9);
      --accent-pink: #ff8ac2;
      --accent-mint: #9ef5d5;
      --shadow-soft: 0 18px 45px rgba(0, 0, 0, 0.2);
      --radius-xl: 24px;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #111;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 12px 0;
      color: #222;
    }

    .app-bg {
      position: fixed;
      inset: 0;
      background-image: var(--bg-image);
      background-size: cover;
      background-position: center;
      filter: blur(6px) brightness(0.9);
      transform: scale(1.03);
      z-index: -1;
    }

  .photobooth-window {
  width: 68%;                        /* ê¸°ì¡´ 78% â†’ í›¨ì”¬ ì‘ì•„ì§ */
  max-width: 760px;                  /* ê¸°ì¡´ 900px â†’ ê°ì„± ì‚¬ì´ì¦ˆ */
  background: rgba(255, 255, 255, 0.55);
  backdrop-filter: blur(26px) saturate(150%);
  -webkit-backdrop-filter: blur(26px) saturate(150%);
  border-radius: 26px;
  box-shadow: 0 15px 40px rgba(0,0,0,0.18);
  padding: 16px 26px 22px;           /* ë‚´ë¶€ íŒ¨ë”©ë„ ì¶•ì†Œ */
  margin: 40px auto 0;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  transition: width .25s ease, max-width .25s ease;
}





    /* ===== ìƒë‹¨ ë°” ===== */
    .top-bar {
      height: 44px;
      display: flex;
      align-items: center;
      padding: 0 16px;
      background: linear-gradient(to bottom, rgba(255,255,255,0.95), rgba(240,240,240,0.95));
      border-bottom: 1px solid rgba(0,0,0,0.05);
    }

    .window-controls {
      display: flex;
      gap: 6px;
      align-items: center;
      min-width: 90px;
    }

    .window-star {
      width: 16px; height: 16px;
      border-radius: 999px;
      display: flex; align-items: center; justify-content: center;
      font-size: 11px;
      box-shadow: 0 1px 2px rgba(0,0,0,0.25);
      user-select: none;
    }
    .star-red    { background:#ff5f57; color:#ffe5e3; }
    .star-yellow { background:#febc2e; color:#fff3d6; }
    .star-green  { background:#28c840; color:#e1ffee; }

    .title {
      flex: 1;
      text-align: center;
      font-size: 14px;
      font-weight: 500;
      color:#555;
      letter-spacing: 0.03em;
    }

    /* ===== ì¤‘ì•™ ì˜ì—­ ===== */
    .content-row {
      flex: 1;
      display: grid;
      grid-template-columns: minmax(0, 1fr);
      padding: 16px 16px 6px;
    }

    .preview-area {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;   /* 8 â†’ 12ë¡œ ì¦ê°€ */
}


   .preview-inner {
  position: relative;
  width: 100%;
  max-width: 460px;                  /* ê¸°ì¡´ 540px â†’ ì¶•ì†Œ */
  aspect-ratio: 4 / 3;
  background: radial-gradient(circle at top left,#fef6ff,#f1f7ff 40%,#ddebf7 80%);
  border-radius: 18px;               /* ë¼ìš´ë“œë„ ë” ê·€ì—½ê²Œ */
  overflow: hidden;
  box-shadow: 0 10px 22px rgba(0,0,0,0.15);
  margin: 0 auto;
  transition: max-width .25s ease;
}


    video, #photo {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    #photo { display: none; }

    /* í•„í„° íš¨ê³¼ */
    .preview-inner.filter-none    { filter: none; }
    .preview-inner.filter-soft    { filter: brightness(1.08) contrast(0.95) saturate(1.05); }
    .preview-inner.filter-pink    { filter: brightness(1.05) saturate(1.18) hue-rotate(-10deg); }
    .preview-inner.filter-film    { filter: contrast(1.15) saturate(0.95); }
    .preview-inner.filter-vintage { filter: sepia(.3) contrast(1.05) saturate(.9); }
    .preview-inner.filter-mono    { filter: grayscale(1) contrast(1.1); }

    /* í”„ë ˆì„ ì˜¤ë²„ë ˆì´: PNG ê½‰ ì°¨ê²Œ */
    #frameOverlay {
      position: absolute;
      inset: 0;
      pointer-events: none;
      z-index: 3;
      background-repeat: no-repeat;
      background-position: center;
      background-size: 110% 110%; /* ì‚´ì§ í™•ëŒ€í•´ì„œ ë°”ê¹¥ ì—¬ë°± ì œê±° */
    }
    /* ğŸ”§ í”„ë ˆì„ PNG ê²½ë¡œ (images í´ë” ê¸°ì¤€) */
    .frame-1 { background-image: url("images/frame-1.png"); }
    .frame-2 { background-image: url("images/frame-2.png"); }
    .frame-3 { background-image: url("images/frame-3.png"); }
    .frame-4 { background-image: url("images/frame-4.png"); }
    .frame-5 { background-image: url("images/frame-5.png"); }
    .frame-6 { background-image: url("images/frame-6.png"); }

    /* ===== í”„ë ˆì„/í•„í„° íŠ¸ë ˆì´ ===== */
    .frame-toggle {
      margin-top: 6px;
      border: none;
      width: 34px; height: 34px;
      border-radius: 999px;
      background: #ffffff;
      display: flex; align-items: center; justify-content: center;
      font-size: 16px;
      cursor: pointer;
      box-shadow: 0 6px 16px rgba(0,0,0,0.2);
      transition: transform .15s, box-shadow .15s, background-color .15s;
    }
    .frame-toggle:hover {
      transform: translateY(-1px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.22);
      background-color: #fff7fd;
    }

    .frame-tray-wrapper {
  width: 100%;
  max-width: 460px;                  /* ì¹´ë©”ë¼ì™€ ë™ì¼í•œ ë„ˆë¹„ */
  margin-top: 6px;
  transition: max-height .25s ease;
  max-height: 130px;                 /* ì „ì²´ ë†’ì´ë„ ì¶•ì†Œ */
}


    .frame-tray-wrapper.closed { max-height: 0; }

    .frame-tray {
      background: rgba(255,255,255,0.96);
      border-radius: 18px;
      box-shadow: 0 10px 26px rgba(0,0,0,0.14);
      padding: 6px 10px 10px;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .tray-tabs {
      display: flex;
      gap: 4px;
      padding-inline: 4px;
    }
    .tray-tab {
      flex: 1;
      border-radius: 999px;
      border: none;
      padding: 6px 0;
      font-size: 12px;
      cursor: pointer;
      background: transparent;
      color: #777;
      transition: background-color .15s, color .15s;
    }
    .tray-tab.active {
      background: linear-gradient(135deg,#ff8ac2,#ffbfe0);
      color: #fff;
    }

    .tray-content { margin-top: 4px; }

    .tray-panel { display: none; }
    .tray-panel.active { display: flex; }

    /* í”„ë ˆì„ ì¸ë„¤ì¼: ê°€ë¡œ ìŠ¤í¬ë¡¤ */
    .frame-panel {
      gap: 8px;
      overflow-x: auto;
      padding-bottom: 2px;
    }
    .frame-thumb {
      flex: 0 0 80px;
      height: 70px;
      border-radius: 14px;
      background: #f3f3f3;
      border: 2px solid transparent;
      position: relative;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      text-align: center;
      padding: 4px;
      color: #555;
      transition: transform .12s, box-shadow .12s, border-color .12s, background-color .12s;
      background-size: cover;
      background-position: center;
    }
    /* ì‹¤ì œ í”„ë ˆì„ PNGë¥¼ ì¸ë„¤ì¼ì—ë„ ì‚¬ìš© (ì›í•˜ë©´ ìœ ì§€, ì•„ë‹ˆë©´ ì£¼ì„ ì²˜ë¦¬í•´ë„ ë¨) */
    .frame-thumb[data-frame="frame-1"] { background-image: url("images/frame-1.png"); }
    .frame-thumb[data-frame="frame-2"] { background-image: url("images/frame-2.png"); }
    .frame-thumb[data-frame="frame-3"] { background-image: url("images/frame-3.png"); }
    .frame-thumb[data-frame="frame-4"] { background-image: url("images/frame-4.png"); }
    .frame-thumb[data-frame="frame-5"] { background-image: url("images/frame-5.png"); }
    .frame-thumb[data-frame="frame-6"] { background-image: url("images/frame-6.png"); }

    .frame-thumb::before {
      content: "";
      position: absolute;
      inset: 6px;
      border-radius: 10px;
      border: 2px solid rgba(255,255,255,0.9);
      pointer-events: none;
      box-shadow: inset 0 0 0 1px rgba(0,0,0,0.06);
    }

    .frame-thumb.active {
      border-color: var(--accent-pink);
      box-shadow: 0 6px 14px rgba(0,0,0,0.18);
      transform: translateY(-2px);
    }

    /* í•„í„° ì¸ë„¤ì¼: ê°€ë¡œ ìŠ¤í¬ë¡¤ */
    .filter-panel {
      gap: 8px;
      overflow-x: auto;
      padding-bottom: 2px;
      justify-content: flex-start;
    }
    .filter-item {
      flex: 0 0 90px;
      border-radius: 14px;
      background: #ffffff;
      border: 1px solid rgba(0,0,0,0.05);
      padding: 6px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.06);
      cursor: pointer;
      display: flex;
      flex-direction: column;
      gap: 4px;
      transition: transform .12s, box-shadow .12s, border-color .12s, background-color .12s;
    }
    .filter-thumb {
      height: 40px;
      border-radius: 10px;
      background: linear-gradient(135deg,#ffe6f3,#e6f1ff);
    }
    .filter-name {
      font-size: 11px;
      text-align: center;
      color: #555;
    }
    .filter-item.active {
      border-color: var(--accent-mint);
      background-color: #f6fffb;
      box-shadow: 0 6px 18px rgba(0,0,0,0.12);
      transform: translateY(-2px);
    }

    /* ===== í•˜ë‹¨ ë°”: ì•„ì´ì½˜ ë²„íŠ¼ ===== */
    .bottom-bar {
      padding: 6px 20px 12px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 16px;
    }

    .icon-btn {
      border: none;
      border-radius: 999px;
      width: 42px;
      height: 42px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      cursor: pointer;
      background: #ffffff;
      box-shadow: 0 8px 20px rgba(0,0,0,0.18);
      transition: transform .12s, box-shadow .12s, background-color .12s;
    }
    .icon-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 28px rgba(0,0,0,0.22);
      background-color: #fff7fd;
    }

    .capture-btn {
  border: none;
  width: 52px;
  height: 64px;
  border-radius: 50%;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: default;  /* í´ë¦­ ê°€ëŠ¥ ëŠë‚Œ ì œê±° */
  background: radial-gradient(circle at 30% 20%, #ffd7f0, #ff98c7 70%);
  box-shadow: 0 14px 28px rgba(0,0,0,0.22);
  transition: transform .1s, box-shadow .1s;
}

/* í´ë¦­í•´ë„ ì•„ë¬´ ë³€í™” ì—†ìŒ */
.capture-btn:active {
  transform: none;
  box-shadow: 0 14px 28px rgba(0,0,0,0.22);
}

/* ë²„íŠ¼ ë‚´ë¶€ ì´ëª¨í‹°ì½˜ ì œê±° â†’ ê³µë°± ìœ ì§€ */
.capture-btn::before {
  content: "";
}


    .bottom-section-left,
    .bottom-section-right {
      flex: 1;
      display: flex;
      justify-content: center;
    }
    .bottom-section-left  { justify-content: flex-start; }
    .bottom-section-right { justify-content: flex-end; }

    @media (max-width: 900px) {
      .preview-inner { max-width: 100%; }
      .frame-tray-wrapper { max-width: 100%; }
      .bottom-bar { padding-inline: 14px; }
    }
    

  </style>
</head>
<body>
  <div class="app-bg"></div>

  <div class="photobooth-window">
    <!-- ìƒë‹¨ ë°” -->
    <header class="top-bar">
      <div class="window-controls">
        <div class="window-star star-red">â˜…</div>
        <div class="window-star star-yellow">â˜…</div>
        <div class="window-star star-green">â˜…</div>
      </div>
      <div class="title">Photo Booth</div>
      <!-- ìƒë‹¨ ì˜¤ë¥¸ìª½ì€ ë¹„ì›Œë‘  (í‚¤ì¹˜í•œ ì—¬ë°±) -->
      <div style="width:32px;"></div>
    </header>

    <!-- ì¤‘ì•™ ì˜ì—­ -->
    <main class="content-row">
      <section class="preview-area">
        <div class="preview-inner filter-none" id="previewInner">
          <video id="cameraVideo" autoplay playsinline></video>
          <img id="photo" alt="ìº¡ì²˜ ì´ë¯¸ì§€" />
          <div id="frameOverlay" class="frame-1"></div>
        </div>

        <!-- íŠ¸ë ˆì´ í† ê¸€ ë²„íŠ¼ (âˆ§ / âˆ¨) -->
        <button id="frameToggle" class="frame-toggle" aria-expanded="true">
          âˆ§
        </button>

        <!-- í”„ë ˆì„/í•„í„° íŠ¸ë ˆì´ -->
        <div id="frameTrayWrapper" class="frame-tray-wrapper">
          <div class="frame-tray">
            <div class="tray-tabs">
              <button class="tray-tab active" id="tabFrames">í”„ë ˆì„</button>
              <button class="tray-tab" id="tabFilters">í•„í„°</button>
            </div>

            <div class="tray-content">
              <!-- í”„ë ˆì„ íŒ¨ë„ -->
              <div class="tray-panel frame-panel active" id="framePanel">
                <div class="frame-thumb active" data-frame="frame-1"></div>
                <div class="frame-thumb" data-frame="frame-2"></div>
                <div class="frame-thumb" data-frame="frame-3"></div>
                <div class="frame-thumb" data-frame="frame-4"></div>
                <div class="frame-thumb" data-frame="frame-5"></div>
                <div class="frame-thumb" data-frame="frame-6"></div>
              </div>

              <!-- í•„í„° íŒ¨ë„ -->
              <div class="tray-panel filter-panel" id="filterPanel">
                <div class="filter-item active" data-filter="filter-none">
                  <div class="filter-thumb"></div>
                  <div class="filter-name">None</div>
                </div>
                <div class="filter-item" data-filter="filter-soft">
                  <div class="filter-thumb"></div>
                  <div class="filter-name">Soft</div>
                </div>
                <div class="filter-item" data-filter="filter-pink">
                  <div class="filter-thumb"></div>
                  <div class="filter-name">Pink</div>
                </div>
                <div class="filter-item" data-filter="filter-film">
                  <div class="filter-thumb"></div>
                  <div class="filter-name">Film</div>
                </div>
                <div class="filter-item" data-filter="filter-vintage">
                  <div class="filter-thumb"></div>
                  <div class="filter-name">Vintage</div>
                </div>
                <div class="filter-item" data-filter="filter-mono">
                  <div class="filter-thumb"></div>
                  <div class="filter-name">Mono</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- í•˜ë‹¨ ë°” -->
    <footer class="bottom-bar">
      <div class="bottom-section-left">
        <button class="icon-btn" id="uploadBtn" title="ì‚¬ì§„ ë¶ˆëŸ¬ì˜¤ê¸°">
          ğŸ“
        </button>
      </div>

      <button class="capture-btn" id="captureBtn" title="ì‚¬ì§„ ì°ê¸°">
        ğŸ“¸
      </button>

      <div class="bottom-section-right">
        <button class="icon-btn" id="shareBtn" title="ê³µìœ í•˜ê¸°">
          ğŸ”—
        </button>
      </div>

      <input type="file" id="fileInput" accept="image/*" hidden />
    </footer>
  </div>

  <script>
    const video = document.getElementById("cameraVideo");
    const photo = document.getElementById("photo");
    const previewInner = document.getElementById("previewInner");
    const frameOverlay = document.getElementById("frameOverlay");

    const frameToggleBtn = document.getElementById("frameToggle");
    const frameTrayWrapper = document.getElementById("frameTrayWrapper");
    const frameThumbs = document.querySelectorAll(".frame-thumb");

    const tabFrames = document.getElementById("tabFrames");
    const tabFilters = document.getElementById("tabFilters");
    const framePanel = document.getElementById("framePanel");
    const filterPanel = document.getElementById("filterPanel");
    const filterItems = document.querySelectorAll(".filter-item");

    const uploadBtn = document.getElementById("uploadBtn");
    const captureBtn = document.getElementById("captureBtn");
    const shareBtn = document.getElementById("shareBtn");
    const fileInput = document.getElementById("fileInput");

    let stream = null;
    let isTrayOpen = true;

    // === ì¹´ë©”ë¼ ì‹œì‘ ===
    async function initCamera() {
      try {
        stream = await navigator.mediaDevices.getUserMedia({
          video: { facingMode: "user" },
          audio: false
        });
        video.srcObject = stream;
      } catch (err) {
        console.warn("ì¹´ë©”ë¼ ì ‘ê·¼ ì‹¤íŒ¨:", err);
        video.insertAdjacentHTML(
          "afterend",
          '<div style="position:absolute;inset:0;display:flex;align-items:center;justify-content:center;font-size:14px;color:#555;padding:16px;text-align:center;background:rgba(255,255,255,0.8);">ì¹´ë©”ë¼ì— ì ‘ê·¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.<br/>ì•„ë˜ ì™¼ìª½ ë²„íŠ¼ìœ¼ë¡œ ì´ë¯¸ì§€ë¥¼ ë¶ˆëŸ¬ì™€ ë³´ì„¸ìš”.</div>'
        );
      }
    }
    initCamera();

    // === íŠ¸ë ˆì´ ì—´ê³  ë‹«ê¸° (âˆ§ / âˆ¨) ===
    frameToggleBtn.addEventListener("click", () => {
      isTrayOpen = !isTrayOpen;
      if (isTrayOpen) {
        frameTrayWrapper.classList.remove("closed");
        frameToggleBtn.textContent = "âˆ§";
        frameToggleBtn.setAttribute("aria-expanded", "true");
      } else {
        frameTrayWrapper.classList.add("closed");
        frameToggleBtn.textContent = "âˆ¨";
        frameToggleBtn.setAttribute("aria-expanded", "false");
      }
    });

    // === íƒ­ ì „í™˜ ===
    function setActiveTab(tab) {
      if (tab === "frames") {
        tabFrames.classList.add("active");
        tabFilters.classList.remove("active");
        framePanel.classList.add("active");
        filterPanel.classList.remove("active");
      } else {
        tabFrames.classList.remove("active");
        tabFilters.classList.add("active");
        framePanel.classList.remove("active");
        filterPanel.classList.add("active");
      }
    }

    tabFrames.addEventListener("click", () => setActiveTab("frames"));
    tabFilters.addEventListener("click", () => setActiveTab("filters"));

    // === í”„ë ˆì„ ì„ íƒ ===
    frameThumbs.forEach((thumb) => {
      thumb.addEventListener("click", () => {
        frameThumbs.forEach((t) => t.classList.remove("active"));
        thumb.classList.add("active");

        const frameName = thumb.dataset.frame;
        frameOverlay.className = "";
        frameOverlay.id = "frameOverlay";
        frameOverlay.classList.add(frameName);
      });
    });

    // === í•„í„° ì„ íƒ ===
    filterItems.forEach((item) => {
      item.addEventListener("click", () => {
        filterItems.forEach((f) => f.classList.remove("active"));
        item.classList.add("active");

        previewInner.classList.remove(
          "filter-none",
          "filter-soft",
          "filter-pink",
          "filter-film",
          "filter-vintage",
          "filter-mono"
        );
        const filterClass = item.dataset.filter;
        previewInner.classList.add(filterClass);
      });
    });

    // === ì‚¬ì§„ ë¶ˆëŸ¬ì˜¤ê¸° ===
    uploadBtn.addEventListener("click", () => fileInput.click());

    fileInput.addEventListener("change", (e) => {
      const file = e.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = (ev) => {
        photo.src = ev.target.result;
        photo.style.display = "block";
        video.style.display = "none";
      };
      reader.readAsDataURL(file);
    });

    // === ì‚¬ì§„ ì°ê¸° + ìë™ ì €ì¥ ===
    captureBtn.addEventListener("click", () => {
  // ì´ì œ ì•„ë¬´ ë™ì‘í•˜ì§€ ì•ŠìŒ (ì¥ì‹ìš©)
});


    // === ê³µìœ í•˜ê¸°: ë§í¬ ê³µìœ  (ê°„ë‹¨) ===
    shareBtn.addEventListener("click", async () => {
      if (navigator.share) {
        try {
          await navigator.share({
            title: "Photo Booth",
            text: "í‚¤ì¹˜ í”„ë ˆì„ í¬í† ë¶€ìŠ¤ì—ì„œ ë§Œë“  ì‚¬ì§„ì´ì—ìš” âœ¨",
            url: window.location.href
          });
        } catch (err) {
          console.warn("ê³µìœ  ì·¨ì†Œ/ì‹¤íŒ¨:", err);
        }
      } else {
        alert("ì´ ë¸Œë¼ìš°ì €ì—ì„œëŠ” Web Share APIë¥¼ ì§€ì›í•˜ì§€ ì•Šì•„ìš”.\nì£¼ì†Œì°½ ë§í¬ë¥¼ ë³µì‚¬í•´ì„œ ì¹œêµ¬ì—ê²Œ ë³´ë‚´ ì£¼ì„¸ìš”!");
      }
    });
  </script>
</body>
</html>
